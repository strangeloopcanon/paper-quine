#!/usr/bin/env python3
"""Self-reconstructing artifact for the paper_quine repository.

The emitted script contains everything required to rebuild the original source
tree, including recomputation of the deterministic weight bundle directly from
its own bytes. Invoke ``--help`` for usage details.
"""

from __future__ import annotations

import argparse
import base64
import hashlib
import io
import json
import tarfile
import textwrap
import zlib
from pathlib import Path

ARCHIVE_B85 = """c-
rlK+j8SZmY`o7Uy)7EY?CqxlDdo4^tMW+s#14d)S~PfPn7}$i6jXN1YiJ^MB5eNr;V7$*_fA&n0ed%F@
MRPOD2#YDV1zjYi7ELjxLKp=E=;HC(k`I?WW!Q)2Vy&T)Li2KKq+IEq-qMZ>zPnUHpyj+pW#^=4ayOvj
=!)Y33%-{AZu$v$-#(nLm}?_TFx5Z}(t-
Ys=o=ZSS<VcC63V&)@xHyJHz<sXd<tf3r4lQSWZ^8sFR9;kCY5toiND&Cl99t-
bBtt*z~yHmv{6&GznRqV<sLKZz!Oc1JlVHX8l?&Hps=WJe6#R0e)1tzmQ}6CjC>CB!(025!(1EqlLZ1;
G^G4Wl%3hSG<^V`r9n9kB&(12>c5aPGthJI*wPcQC2&I!>Z1AEZi0M6nEAA6{W|0J5SRY<xGve}ib~1{
L_8$!QE7$Yu%j3SneX?8F_>hCdUTC3DBkuuPV6%TxEpfvQ33KsD#vXwVS{Rw{?H#Lwo~;nal=4*>q9Gx
5ihju^Q?DlJdODSmcmp0B>^PoLQOU(5fs{Lkh89x&=Xd-GuTV6U~kmj9o^`XBq5KMtcr{_WcMko@0j<?
?^KwYi1zzun$h%l`+N|0@|@H7&=9=R<cmk&e@}Hf;D|!9STqX^*d)mOY)v^ZZ9L8;$ZG1CSjl{8uXvRy
6ol4m1Bs+EdRO%>2M>TArU~2wINE4L=-3O)GXmX4|nhvfL!|NA55KAlDM4H2$$+yR#ekH;BgYZ#2u`-
*g@hGkIf=zqjlsJ*Sre*{-?NTK=!)|Hrof_cu59)+_5%SpRV%8^dTi^)vWSIP%B#-
2KSDfDg$3_U6{!g8jdZE`hcDe}E^EaYUAIL*SnsG08G8jhju-
3n#My$n<G5PDjl_;0`aL7@FZ%9kID>@7pc<J&B@Af`Cs$_+Cfo!gs&~vpjKwMmlMtD$yvYuxR6|W$)O#
x3z)QKG5wPW^?K%NtC1w)M1PU+IG8j`zTc5J6iZg265Aq87MoAR1OoFr6uUww*z0Qbw@L&^P|5WHV1C#
ndoWTd-lPtGoTA=u;gL6tu$lF|6YdbwGg2@l^t=Ee}F$jP!%&j3f(}x7e^DRhyow@n#=*%_hN|eMWf*c
L3G`42T_vcr2;n`&(Omp(s`Q6Y5oBg*jT0=@m6u8X*#}Gi=a<K|Jz#D|JrN)??Lpxy+Z%n+}>?%?eE(M
t)14v{(9|w66;?{AX|InAKw4710O;EYqz#GTWwGPVf}Ay?d+}fzlV5!0Qp<Fl1U1Jz0wgCQd%l?d>aR|
u^*<+ER`O7dP|b}2PLm7s32g4L*=`PlKB(TX`-Y;W!~3ssqm)v7kS^Z-
_H_>ZXQq#?p^6IQ1b5fbALQJ28|?&=e;cP!*Qjq3kE*u7f^EB-
uVz9e|R{{CiiRiD2QgB8)o+_{lrg)QQ|$0vh(OthWD%V%+H?B2EU-fb9r+QL~JQN^)@IcgDDN}#GT%+S
*#GH&!_J2e&zps{Y$U_lyD8G%M0h@x#SOyycq^FkILQ+>80xj!-
+qQ@7M6F_@3iGP5di2yFbbHWavFheD9v6(Y(56(P)$f?p!AKEdJfhP2}tQ(>zjCEbmwL{MrxvXc;H)?*
%cOksoBhiEd#yv71d03|mf)mRqWlO}0khr<v`i4hk|Se*@4~cI*QX(GH111gB-
A1D|9;Zum<NZb^>*#wIx?<2l|;I$7iZhxSMQ&_(;piKD<D`Z6tgGWA0zkXJGQ*qgtm;fb6jfGK}SZG-K
YV5vloWFo`iuNzDWX5e4SVD9*ylQI+f?GQ1hPZRQ+L4{EU)DlnJa5e=*4?kKT<0wO$*$tf8%=bP5JeU#
x2FT*t&nAu+1%aD5DbUJq2c63AW~#3rYxL>0J08pABTW*fePE)Ar;06dk3^=kAWH!pgRi8?ut_l{hmuV
AZ#$DWId3U?0>!g=tVO0knJJXe6bn*wVd3B2icw+Wrjw%MP-
|y<Yp}nwJ!pIT``%zr?ha*ZS8ng`9Jr(Xfou;BcDHu+w}&PWzyY%X;*MD|lg3A4Pe8r{nII3?*(+DfTj
m@W{_vjudts@0sf=Zaxi`>JmpZxG+T3Zh+l|)l`DUxrKIm+1{d2{7zcvil{-
2NR|Jhvj|FqWrp9k^(?5>LcZEhZ{SNSLL96mdKb>6e5-rul|yZt{~TYI}(3-
Q19_Rc#0=V9mHvYvpp^Yc&tdJ>AWSs+s}iV^{qU=&8vXqJkj$OAP<98$ix^(6*`KsC!|Xp)F8L?GQzxN
!`YtUr{gEnY?*hI3Mxi9WUBynOxSxU21>KEY38DLnyym__0w@@7MX%Y_nu93{4DSxjNZL^P0dkxe9k4?
uGS7?@dXTUMjdu&mEN7w0b?JvkHAh_Z<R#?Vc?n$@m}Ub#Pg+uE$bfJ1`jhoE<k+@Tae6k||DMfH$}bR
!OH9npu;%;LWI`G5Uy(FgmoZwp~<)x_%%6e~ZNC9;k<2)J(>8=yJ5V+1R5FpoDjMAeG~*c>8=qF4+78(
uK4A*gKt1?9x)nLrI+U;-BO;l+!WBJi&O(1^f;Avg$R&9-
)G;wcQy4d){EC3HI)iR&o26!U0?0ktF(UIepN7oh%uW+(hKox#-
3Qk=?xC#tEGVj#g#t^pJey6t9vNU?e%20k=`5VHxCPDK_0usRMVN<ddIklm^QH6&7;f}%Y1V;~-
@A$k)(7GRkAQ#XM2qXbRLx=3fkA(YDC4Nh1?90q|Hg6TDeeqH%4jNKNmpeZszMLYw|ncD78T^|Ty76SN
G$Qwk1p8={9v|P~2M`&jfy=nj)X7UD_1Ct@F0|lj*X`Rtor-
7>J;wJwv@csZzM9|ME$2ftY+>9o15M^031?mf~-Fb>QgCS+uA;K@V`5XWOrgD&s-
D1W?6;s#2V6RjDyiob`DdKXJU?d!<9cqdzST=~38se4^gFV1EG%-
K_^nX$j<D|l*;0(FR5SW(a%Hs%{1_F+#5)1*BL>L7~M%PkI+$+NN`NVkdrx^N;qZHTR2-
Xq+M=F7}L>!>1|G1v`!-
)Wb7YVME2$se~CP)gj2Ei1<WPe!pX$>2Bsj3a#5Xl@9^o4W*LWI@oFnL26BYKl)28I?efgyS~isc7Q<H
E-
=p3bugFc{tEIu0hDVP)tx_P`Zrj!`2pj5L}`hr8W$W8aSFKync`oR16o1*9xSNi;Pp*ib?EfDgbhy&la
%VncP&gP%u%3xtQnLj%&Q0wzWPX=qZW^&(Sg4#tJ)0crt57AgX7087)e#hZyDG2ILl91>!%jcfH4=^N%
ZTnVJE*aZBIWH+NP1Bv8!I!9kLAa#h{MvR6L5Kl_9>52igIUzcVU06P_+=f~D`<f;ZcMu`Ffpr$bL<|A
3xK3P<22(T;Il`X;m5HMh>aHS%F)WQD?}B6cC<+p!NJLpmn?-
Wc@uH!fvk~CVPtb`K#kdN^(R>(4t8I(Z07VNllJMe&LCmHxVGNn(rY%mUz;vh*(c=_p0Tvqc8Ch5goI(
<(wpVa^WEF`Etj1*Z#Efmtj634zpZ-1dv5_=WGY(uft^fSfe-
Kj<5;wYp0IdqVEwF{ju@ewcS1=c~oDU^Y5DeVmCAP8yy&nnMfr9gy0$T&T4MA`LlxQqG^uZ-ywZpI#`?
jrJq#o$nECp05{zpu57JImWIe8@K`p8u4SeS-
>^x_1IPGy3k30d+y9Ks0xKongUu($>GjtaScs00HvM+sudR45*Ut=r-
W%d#{BS*B)n>U+Qt>$t}7=bPuRUmT0`=O?e8+18#d&aqe21faW-ul^yhC^w^VY9@D*&(e{eC1^|XD$H?
AGcb+<n1R%gN+8$IeVG8Y{uLI6pUuTHKt^g=KZ^4xh6aBG3H?~9BP5mO$ejgQjXs>_N(g>}9tSku6jhx
Fgw+)Qgp$^e&|Ln101fgOmI#1&j9z+CJ)PGcfnbzb27M9LKlhsFJ#3+eOcN`-08)hCXS2~rs2-
%M+HsFQULA-
LtQw>8@l6aEfRQE0&mJj;N-P9c)C^Ywd_?Hy#2S92WF~?tnxdbj!@j5@D4w|l7C)5fQ=vwKU-Tb|^B!n
C`UkKNlv)y<VS?S$DK&AV(!K%0GukpHe*TyLx8M3l81@<VCj_~b0hIzeakZ@|e1L^n2k@{F0Ic6mXBj!
Yl_~^(3=^MtU?HVa;70hTS7U^lbdl0zz65Nc8aO8n3bZ9E6ODlg<c$xdHZ~q93WBvKLpSjw6sE}Cs>sA
}%$IVWBJvMCQXjI(Xcj<M)23SBFgo~80PFkpo5S8IwQ)`=b-
RV)aUhlM(R=Y)jFA+nyS>BSIg$%yY>BGtUHK{W6sBJ(PoT0+$BB%MZ$<ep@~^}~u%Cb<-
0BA69NmRL_SDLZ)KWk)j0&bY_OWBM{jE<aVzA&qLcm=8s|HkCDyP3Z61~T-
UkaVJPYs*_65Nz%ZAGdW(CE|+VHpY)YX$){jd2;sDT}Fu>%)MU5MXv#K(i=8T%l5#%>&sHr^lyazb>|c
c_4ED1sY9*ItfA;JempDAn;Kuf&L-
2pkR9iOAag&MK{et?Do^py_C)n+6O|{0<(YQ#&1C0q<yT6E3t#*1L7@(*6O4R^<iON%Kd(`AJ2hsah;5
q0gzxO9$>H}Fcpr&D?f?CDOphsWHhAUbb!k!6|;|9GWsMIrasB*oRNc8he{(*Bxo9aWc;8d6Q~V4yUF@
YUx+&7yDkk6v}q&+MDQGGgST}my$U4|cH$N2n7~^=eB}eIVVC-
03^U;O$wZ6shYt(_=H+`C;;zk0)V=x|%IhB10Zh$q5IdnvnkZd?<e>e*T(dV8Y`6?x_kg$x0WgVBP#5R
|bLbqjawO_1`rC2+gQY}mF`sSHv_PYT={j>!WOKH`Jil1tzq-
T39kF`O9_t2o%u693!BV^<2H^1@(05>Gpr0gYW@d9-
J1*+d%y^grnahCQgSwjpmQfcf%2Y?Bf}{hf0yQx}rW@>W90Z%>$OvMI--
#+r4>gRdqGr_KEw6|Q;tX}o7<7>*GERBFD-ESs*Sf$NZ~;&Ud88n3kdR4PsP@Mbw!}IA0B|%8+(G{8g*
&L>Sd__jczU8isytD(B$O_R^onip5OCFCWu#@`o~XlNhAL3Om!yeqY%D7QP#LfZEIsl3?<E;Az(qXJ27
3}~6pGx&hCxnXEdx)6VfQq}v7@7E2nAG<SR^o+y(k0;D&Wi^LphEz(k*T13ac|N8DDao7~+c6O%@}>4>
mTmFoDVRINS!ZCtp9a3{9JK;>MCN1ei#1K!5JNeg)PcFhq%ykEShrM)c!4SN;+(tqD!UIdY>CbV^uuum
S}E>4B`Ax`^=HKtPrOnD<e0q`F2cbyT*2wsTqJhgTpR-H_EyCDaE%dKpX|2*aEp-
H~K+bU|D~4?$rEn0`n*!=g|b4YXAo8;f}8EGB75DeViaPEa;djlX5lTA=T#A(T4`KWB%}nrPWWQJC5~^
=9ZRokCeL*p&%z)Y;Gv`NMbyqy;hyr8J-~4x%~f9w^^Ye3NcaxT$mpPSu8YBq;!gDekxn?vbFl-CVd=t
`7^xCuJ09hKy-
{Dv8yit#Nn)PyizdE&~uP<8<Q3sDDa(Y}duJ({mWd4sw=I0}CYZtiup(Y1C<9%>}TkC0MM$e>2Q+0*w!
Ct`tZHKt$0vK$3bUaZ1G|e1~qA%G^*lo+Z&Gw6<-
0()~bN5W9N@vnG=o+DS^<kAoSA=bjJdx_ARP0CgoKx5dUrKM1CMfD!nE#7*V}TLKW+m2`?&K$(&s9PkA
l7x0Bv8E`(8n*T_o*KQo+N}@8UP{I)ZP<$9T3rUW`5mPgm!7eZZ%!$Wkb#%gO9e)$yxM)z2hK2%%oDsm
l>ZqG$tYv_*0qsFw6<==ZLkDt}d~`zNF>5HffRwED;5xQjQdn^YP$$H78#BWe)h}4%Dp4J@bcp^Hq*2h
cjj`?3kS!BkE455KpO1Z5pwP3&38<<QRD}8?U|h`&&>H$9|AzknmXk>M6RfY1a=Gz<lpfb1uD-
0_p#qJ(v;X+)`0y`a>4~G~hp(O;cTh@1Xz>%#h7#DG_ehHZqNG9&G>P+5b6@kE!vuCnyiMT+u5^<zC~r
inbxQJVpnFCukZDPSB+nGE2Hs|n!a!kWd_Hdi_o`yEfJadBLP{S4ehOkGnS-
Y1@?a&pu3Yk6vcO>;$WubLKA-
>?kkS_~QRgCeiL%?pUnESa=Z{9{T_0kelP$htlO53Z<mEAm(P+pS7%AgyASdpXkG?SFCN*Yyzb0M}fI(
m7Tm|QR79v*>%!5g5*1|v#R;nZlUZ9}`M0BEti*-
OeO=F;Qbi>rK@EHAdQ^p!=m&&zDPTCPFCaSMMo2YowX&jHp(<DZ|3_K+go=Q5^gSnb=>!+7<J*G!mIYh
$a8UX+F<V3+mSt>omJ*{_f(tOR>Ar}Z>&;<iyP5}tlbWI=B(3wsfRWKC{z`hk1%1CdL?lHv31-
FQw*kGpaqXQ0=MmB*9=|;s^CGdcno9uJ}s?LqusYF!`c(MdC%Ta*!7FWC0wh6VMu1Rt?0CrwA51CVdc9
GIz*C3R3*d)V|djH5^6^Xp^<u%N7H8%(sxrPR`Y8~eezoOU^phx9c@{q<0dc*+H>4~=7iyELqXcreb;L
)T4;_{H$>BZ%W{-0QlwqcQ7+PXqtu&goWu-
&SWvy=o0Dp{(}z?oI1r^n<nM#Y4^RAb?Rftlt}qjVmkTh>n{v-
E2XFO=xEhGkAO5L3z<3~VfPzEQd$Zgb+Kt#dwk6$TNQK?xNXsP!W$1RgC8^kk8jhV)063PU}8S{`P*CS
EEvYcd1=0;NGGqFBme(2Dw?)D2-eC}<Rv`KV%IK`u=d6`o*#j$%P0LDmo&Cw|C2$6^@*XJZo)l{3It-c
cRc7@{lf^UsSo$D#Q7r+-`Jva2fD?A5H}8;mx<<ZJz1vr?_Rit0-
+sL`ryehUf|x%SCS8eXC+`CC{D(9^_^Gh|)oDoTf_-PoAUGWLL@KL9%gGmmnKB6R=-
r5>te%73`A0ZJeHltz965?=*yP|PT&W+G8V(_Zs*HsC#LfXO2~`yls#<nD$DN+OL|)|nc!jwE&f^*Vgm
6#W4RMeI!6?`Y#5tbSmF+PVi$hO3&p>d7mLPm%9Mm1qK~B7flxePz3_ZU|Mi;QOTPLTkzxqn{;>hQd7v
1DXb9614mbbxT%rv{AWakK%lwm*2~!6E}ye7+RZ!e%4$vj0y!HXPE`F6fuWtr1Cies{~D!!kWv$Kja;n
^`M5?!18@E>5$P<>`d8n9n!a#ynOE1MU0kK(Iaj4q+~8N3#;dm(3T36Xd=Zx8#8h~f#x2u0?pJFAMEIp
v9yiS#~E#~Hx2iIGLa7F%)6mg<>15hs6EqlVKVYU{{bALZLRgf(*<jUh`ytzog>yXC#Xysm@0>qsa)0U
W*IgRQx6^eKtRQsp|z1|PeWgM@}ME39wq|Z;pzJVmdO}a4XApWF~F>GkQfLPH6?T)9i5P=B&>d`Pcs0E
yUh{<xdfSOY8Atm&Ayrw9dRW;IVzyU6}I{$j!F^OoCV-
|Vz!AB4g}gn#zB4>#JaqhxWJxpWB_R!A>{<zR02pj?}*1MDfIFy6xkd-
#2BIC4RvNV?lmoPQ@=BU$jDrgq|pYQ(OOD*8?myU>LQOavzi9lj&&a8VIMZ)P+%*GHspj3gvo9zMF#}B
PALQ!C=GzUfcRgvF&P;cO<)v5$tY|hS-
G*_fC4B$01JpzK%nA}^p2xRx<5Kz!Q27$LW&eauV5S)X<;phG7>n7n@X2hIclI8N5(-
nOk?OZ&<ZLf9)`jZr5VT)^GrGP(zxhzbEk+nA~?eU-Pl0I{k|4xMt&c(Ln&r8fS;Gz1Tl?Jr7=7O<?ee
5md8Yk1}s={Mkl*1G{iD;Z^Yepzh>*K2BrEwQL2ifPt`dZ%o&par#J-
IAK;fXEQ(&E6GEpcbf8y4Y@EXsranqaQGI@XekyiuZt7xt^FUB40FgVIuAslcJf_Sc=qNs(m~Z_oqaYh
9Z=k!^kyc=yH#W9}KC6$}A2e3r8W=$n7xxB-
Z>BCT7m!QCNgYsxb_>{sQQ&g;o%}AzYyf&V^`Cn|+!t+i5)_L1xh2p*aR@P@h7|Q-0-
{+IT|#!j#)2})DP#gGm%T4Tu=+CX*Ta75MLn4D1cSlM3mG&Mm`z)GP!TPInFouSyvptkygdMPfWT&Xgw
_!WxNoBYI>)$QdEcSminU-
$1}dt+^)fw0X`Q(uay5`^TL=It0a@J7KmGe^UiR}(|3Rd26j78Es3pW$6%)ltIU|L722!$<OCRy`zx-c
l?;p01Wg5n}dR@5RPC{&%V(^A^!ANm}W&kYmSwMC+w^*=OT(IcK#Qk5n2OT(rkG6e{P@>s4D5?`5eUYe
ILpRIl*i`61dBSX;XQJTxHV&Akl_ynf;`DB8XtCQY2f$1zjADIbW3?nE4!^N+j6|CH-
!p1;#ZDfX);hbY1rjlK!;lrrAsQi?@?lueZ-
L<`U^80HgQ@W&kF!6hy+cYC$>*{MkOE{oIc9NpMF*^>)<0q_UGo|go7|U|py&I`70~H}F&p$&tBfGPtk
#=Q=R+#dl^!v_rmQ?Pdj%SiWInTS6IBl7qN2g*^-
LyUh_f2!3<ip&Dx+c1pSMal9+7a=F_1dD15_A~rD1A>KauAf1qgYin2X_?uQOf3e^D(2V#L56YUc=Z63
qfn9KLvS_)QP2Vk8P1lz7fZq60SqWFsh_{FF0OK#Fme9;}sYVvDa*PQgI8G^`c;Q=%15?^5M1(-
AzKRHJsuP~|?h*w?K+f^N!~1TM7k^-+)c(&-8LB7GXw$R`Ii#nYfQm~9+p43-
`t%kzNR2yZ7(QX{?u97wHRa{nN_0VcYkK2G>Xc^l6Lph56zD1tqN;Zwsr=`5QOT2?+{Z5PdoP+k{f6(p
I*V{!;4><L2e5KROZdL#<p0;(2G;L%Fxqb`pN4a5WwxY_HyN}I@f*k~q6fD<@$<HAwK&7z;BqvP!^#b_
VpQTJS9M}f4OJunmuzjYSk>G!C-
7;3McE_!laNc2{NxpoC)2W(@cnJH@lM<>8S*hvgH1<m`C^h@yqSEte_yy!X%A{R`r31#pWCNVHsG=^D4
6LjDo(V9wE1Nh&~066(ppD53PO6<|=Lr==f7ym@=-
f3{t0B!hEIjB$P=V+PNNmP&?ukyq&GZDiJws<xpM}f)_9mt8#+70KVx>u3!<=WRO_V9$*gQ4e%|4}GMI
_m+XGe-PQ0sDqsrgSS}!=!?tg3d`4`jgV`a9bWwqVyOos4smVAw8!VD8oaXT>heL+1!n!ZCe02qs&q^k
e6&`Qsil!gJi$Ne7`%5VPp<62F(hzO3<Aov!3)3dkj%Yi}IvpMWNc~0oaf?z)XQ;wCjU|A*d*sIiH}zt
ity(;rlp+uB!egK01;)jn~NTwt4^&ga^L9CI6d!Z{eKNs?mvps~)|_ay(<_I&q%~<>0EZAKzrC<>-
v9FM)yWfTF^Vq&beK_|Vo0%o7O$0arf7_iz=>VsfKn_BdxRhm3FBWXu8-
c;O`Az;TptHZNwg!YqHu+EK0^o$B?8#*d$%0)t6z^U^$5uR(rE$^uO}oliTrYn+RTHoC{!9O&HBD5MCh
CQZzzltZ5^l`6Vx>l*VEagLCI!MAE!s|#5102+lrlQ<%$f8#mb$URYIV}&c7p_Mwue%~@ht0>?pQNR(X
3@Qt~ic0sKT&C;|<>>m!QWhp!-bNlKr=3y;7kdTSGN+tK=+Y?C3Bte(``TgHM`Up-Ejw&6NB$N2wn(QY
&ux9BQ;}SWW?iw6q|=Y*FnEk&+gUUX`bMG;r=Qd*nWV0AMC!SR>(Q!&9e7!szze@jCmuRTiWCVw`Km)m
a;hJsvyg8mbwKlWQ1fo8erctT#3b8UD%5X;tvON&luH^UrM8ZO=$bVbkO1lOz6Vi7h=r>M7rDzppalW7
OdQXMI4Ijh8CBK3aScJgW>J{Ta0p^smtizWIp16L^P9t$FDQymL={C@$FlnUJ|16am5;R-
KN<m$ThF)`;&b@#L8}}u!9(vkzCou7q#Z5;Ws5RosoilzzQE$`Wx)45H~&XhhxdORQ~3VJ8+eJ|5(>Z@
=j#74*X3EV``(uic&t7S6Za)A4D|NH_IV%j%1S!%(;>p9HdUHuM_fyJ3CmdM>Wec0RM5|TZe*E&cHpsE
LCSfiNsl&8plk!%gWYwk5E@YsWUFYS(C!K}GN_$RBFe%&XK=wcD9tfvy(vy8?rVM3JLbJ4tUr(kA3Fp(
I*M#mzlfEgKLNE~)(_sOP!&gXC^e96X{|0i#&efVU@sLg&O3V7A9(D&Cm#Hcta04$Gl{Nk-
19;^S^hvyzKINC#j1H<1Dj3S2dIM*Xqk+ZRU#TdV-(Wjhyr4ToO~-
Cg<!zUC5VwG9TvUJ6rLAMq3E)XH>)Tm#hX4y27_#`NO3}^^B+-^ec8ll3U*2-nNZM$IXiyCY_?g3k#g-
M^FWG{_S#qH2Vk+nCRN^k6;=b4VxIb3T;8~}9{|gfPfx0F9eyPSh8d8w|A5-S2`jon>20SRY^3c9I*o-
k#Z9A29UfL0H~qg}%dm<6Y&BZ;?&E%qCkS=IQuq(+FGiT54NbN?(C~l3{om{Jpa0YLf3H0Md2@SfcXPc
1{1bSzUj4Uh<3r~^?`|#a|K4r2*ZaR8;yL~1{Q2uw;(vD0UI7zl%Wk)=ua94SEjnF6mqS>mC#U%1AFBA
e)*Sd@GxlTa^qZx(1i`ZGQvmr5ZT+6b>M&q(?dZ6GDB{bc^N>rzvZ#E=`rV(XaKqEU#g9M2pWM@$XiNo
mOMiso@a^QZmMbZZ#w-Sl+LM^%zT&eK75l9xuP!R^5!9Kt*c4h};^GnSb9-
m~?suhu6+0S>MlkK7K^snt&*tmm9OFj_QKG(!kmYa^iAwL%=ls<bzz1^ZqGYE|aaKJg1*AHrY*z^6$hR
y)Z-<6ibeIm{hR!hV(`3l1z(OfJLR;Kjg!V<i$3^(;3~hWT8p(>!<-
@H(aR(K$(a5c_rL)p33)@~C1RKznrKyI$pMFCmU>vz*tL*AVLzlFyg20xb`mv(CMk9qeXrRBH)U-
x}&G5$6EC|K3=e@(m_RVCcakDeNYJ7JcPb>>2r?ZNnVH%Kxv8`kZI2q-nTe?L>7?-
FB;|`VFM_}Jf1JIwR0lat^@w?Xl*7{#@{`1cM{_eiLxx3rmZLjbD`V<~cJO9r-|EJa7-
rME#pMeIqcDL#LpUthc{`U~i=i(G4srV~OQt?DiBg-mf>4*Ucum)`i$nS1Y&PBZ0E8{H|uE_jwE?&*1r
*qoD?Iw9(i`>XzbWQn+n12OAf7HOBMaV83KCXg}`Ctc0zOxPeK9mBWGp&FA>EAe>h;^_8-
xtOwp<JnCusFJ=U=znf$nXDeqggP*{Ya|X&p-
V;`5X^V1nCfXki$5_ZNli4dWO42p=1x8P|_o}GUzH3Yl`_~q^4Rbl+X94p<;o%ZSl}wE(Dr_MP5kU!`N
pH1$2Qv-;xnW=+Y<GI``5<IQO|OC>WHAesMcmezv6A=*tL22)*Zrjm@216$-
*!K1`iUeUEeh1~ZC|DQu-SJJQaiI`L6sMYm*Gc)A4T9H?QUiI^%!cs)-
^p(&bT0+^>~j*c$jIpIbzg3~E57@PB)HtBLW2d6^ma`C)Cn@$Z+q(;T9hi&%j>ZqI~p-
e!c4~3MvKEOhEEOzG@?Z$IqGJOUMQ8aA`VDt;hMU#wO^vN38{%PpO=_JbRzXJ)m*8kS}pK<>yNZvhrb7
y;hdv|NC|9t{aIhy^SqW^7f?d)j(-
)_5&_rGqn*5^My%=4BcaD(?XU0C@p>aKWOAw`FFBz)Q3+qc_xyHXdG>xq;><$~{ZZRljLt}u$*EY_zob
1RnhR#Di6g)urTX^8NOrE}}yeGA%XRV+`kdZ6Bx)lsU;N*e{%^d?D;0n?F%=3)7I+mv0gFb2%+=SEK@A
8<n{Ch+yk?v~xAZm2XcpYef5WQVh9JnwefU?bbxmAZ9N49||#CisR~@xsErTdFp><+@$IJdZC~K_^hRO
E=xATUW?m)a`;9Zf}~e8pG(S+ugBSx+?mTuq*BSP43%*Htaoni{G-
d4omLY2mGq+pu<natuMJdvI}_F!#T&-#T9Y*dXxK)qeuMO#?-5%ng(VqU0B9U6G`FQ=7v4k-
$7DRztV{dY8t*M4o|-
WG@cJ1dKVUNDIr2lhD8NJ@`Z&)2$(J57^tHw_V+DLM{X44_7)Jk)ovFxaW3vtQPnf6*_fkqVex6C1p64
r^A!I%!G9j(KYuOS!pXZ(+OT7QM*n-oQb%%i)p70DZW21P5O+a2oVS1kiCQyWt4zB+;WM2G=y-
CJ<`vnY=_s$U!)F`jbyZi?E?ih(4wEntt?PMFOeHJm<R#iO=aSwu_}r*2F3*N)1HOb2eT>2erWaPow~L
wO%v8wBT;L)1e1b6qJcZ6C(EU@k2hEhhF;>*2egOI}{n+75GX(;uStZ1E#X6w5*8kV~|DFEd-PZPI%ic
P`o7mPD0DcP39gdg>(*HNxV0h;D|82L>|GTrZzW@1w{J+0%&eDV&m>5)7NdQ)*QhAINvBEv6U8cpJ6m+
jGdl=6#+fsQ2b60Qf{*^bB?rpe!b8y#mva=HY<cs6oQx>1SqxRoxzvE!OqK^xXYCp94eKTTAuls$<lML
DWiEUtRW}=;<%J(;lP`$!3ARqlJ=~=j)C`<KOw}oG@V_6%be}|8<FRJRu`X%>wK6pl0Z6zd9ml+(Z%m~
r*$Fyr^RPx}G*FL=ijGiaZ#1RTc;`etNV6#MCac~IxN$&xr=nfyLHk;}WmHqQIcI@UC4K0ovv%IfUOi<
;Ml?FKtE=2-xAE&HaMKl00iaUmGi41TWMKI@h1^Ue~>z2?|7gO3hWEBwuAkzvm!-
}GHHQ7M>sSHzT;{vfP0_8ZP8D^n6jy^lw<x{yhV^zOP#&p!9{ym^eD)leCA1d$%`llc1zi?}U{yUuw)F
JDb^Blq=8H&fiFZFleW9X*Of5H;GPTW}k{vI2k9-}f2KXi9b;iqMt9iP5-&R)Mh2Td8@R2{mv%W-
NpZXOD*WVHqs7@ka*zHMJvhiB&}PY;jIozuhf=eo`vw_(++CnwL2dmkvjMB-
5I&GE^z=jXk9R5Xa%sCVyn%hU`ItY^osj?WIykDpNO9#rQG!%Bnao3@Nr_=VZ+@|#l8_m<T=2YAl;>%S
boLWAp%^!v+-
G0W}Nj%cXel}Ld=<QRWL;<b)nJu&LSuY1?TQ^1_w@#!H9@%0&wu3D+1o!Y^%TVP2F2Pud*K2#|QzJqDk
c<j7~TZJ)-
1vYZ4CK_Mj2fkJw*2WvC25X4UZ{P#MbSiy*TLT`EG@FJD%BJ<iciYox_my{H#r`((!>XoZ8~@=>sP=1l
FUNl7P;NXJz!a*gQjhS&ueUhi7kS6d7(DY~W}943g}CU%Hi{%h3+$b?m=yg~VyJ5@OPiRV!(Xb#B<!}f
>hRBAekI%63iKE;9i$Cvw{lSz!)vdbufjU5-
|jgYu~?&KB8SFQ#aXFQs5DS4id(kn40)cj8s_WM85B4RakX}#QN{|N;*M3t_#Lv-
I|kwikJ&5^<Xf6}_-6^3n#Jn4nvy1h4-n<mBnml&Y?}5MdrC?bNFB^Zm=WIv4ro8dZzr#-
JaWG0fH|CvTVJa9S2Xyx%XR7`v$~b*N)0zoL&;8#Z8~gD1~fQ2=_<mgZh6eLqBuTK-
*!E(S}oXOGlyYt#5xWh-
I`rMOf@gSeFh*7jSvRJy|l+NBMMfdGEmVa25sv%)x5GgjjwyaRTLh(T4pG2RV_f(?1{YLVyYP}*1JmVA
cN$0rD`ntsuedK`hKNEaSB3RHLr<Ci|_n$#;T$P2U<|9Lcigf^m2(^7^{*uldRAU3MxTHfUYi0cij@3G
J2q<LG=y2VgTb7jrUyz|JS=qH_Ol4H5_3Df3R7%S%`<L^RH8Z(eyd(t<fhNc#Aqtl=x#Gx2>}7YmtT{m
Ngu;Gi9_w@hykmOFEBL(s}UM$1B`s((gAKxcjHi$2rgNphpCXyX0+!m50`Jew!w9cy{#s<m+SSF|eSn;
1T?=Kr`>vz;xN(^Fw4(Sp0`F!9q#iV&;ygZb#&o3ae8G7Ns}TH(o&Hl6;1*`A_`z`m6KPug;y`(b>squ
6Vt>U5k2mi#qh~gZj|ByA`5$_tA(DMy~nXABd^Wy(=^e<~B~gT#+hSY}22eWd>O=FU6^hnMNOQ;0`5p;
@!LO9mrOk-
<qx1+&gA!@aETZQIMpn+V8ufOgM$`NL)N(Qk}qhoFq|FEeV#<yUJm1kq|I_?okJK^7CD0Km1Sz|Neblj
H3+RE1E>w(GW{~nq-J4b17nsN8=sOm~oW(O;RSs6LF@UT)LjS$y1-
MZ^2V|_(bdu%`nZ*t0<H_UgJAp()d-
#M@!4!sl=;k$&SjKL}|$HVd4uEa=eA5bqOqpU@mT>#Ldgo!7`ay&9GSf)X^%PlSNen+JeMiF>x?gUxkP
+p*06ZtR0vMqbE2Wg~V55Qy2z*QEF7r0$7pAN!g&P^1(YRP)wuYLiY3$_<2>CV5Aw=`7i<}x}=|Fr5(B
E{dIOlKWg>dU-L#Rc#h%|RTg@@mODzjD>XyKy%p+?S#v?-
;W`+<8W2Zc(qS~vT!SfA`<;v3Y;$?JYi$;6zT%eXca>6a-
c>r~?$uY8)V!~wx>70?dJY}ef}eBYV3uHpdKV1ZEL%V^1dv%uMH#WgCcl5rH$bE4%@tMrVbj^URfU1Nz
8Ee_(k|e(&fK+w%(URIvuxDZ*BCF@j#HqqJmE#73)8J=>9)yU27TMKE0Q+gDWX+6SM_7@H}lJV7Ae*#i
9OU{SBt|B*gl4tRH|50=Fq!Jg448Q5iJRU60=ubRLdie!rtZ;G7IbBl<L};c~Ke>8>)`dk-MT==JF-AX
tAXQ)>#6z0=iAPqpJ1Niq{jNOqgHHCBzq+U9Rd^c|@z!ChqKg3aT*>M_=e~olP^~GF@X0u2@KSaOzsgs
!}C#tBP7RV5!CBUK=GB>y|OIFho;<Ee*|pxq4XUsBW7s1IRLSx@-
P!>E&(nQ0~Vq(?IM7&(mYY7Vj!jvITGbfzE4V$v#ZRbjH>xeJONCBNqxFpBdKTYAcl8+Z4{wlwzv^){L
gnxdFU}+pHQwqS4^h^R7~e4oocR;_9y(-
J<g`=&e1x_Nukw8(Ndyvex^q!Y6ebn;F?DQyAJ2Djy4#^o@KSq3=Y&4Fwd7(Qs<EsS4MPfkJ~wnrgiC9
~`k}L0SmlE1Sox5R||)q3(BPxc-Wc^3AY6{9x287*wGND&f-t8UX#&aZpbLySa-tpyMD(I1b2At57|Al
!AAB<7ZW-n3}cd6xE)LLeE2TM22i=kbL~1seKg^jXbk>#1!-CEMm>}-cC<<00W(oE5&q-
A&}DdU!by<s+qi+j=j<&RkP)A?5(;mEbYSWuJi<#<gGde4U>vuqCvj2QUSo*&&Zg7cMHD%i?Y}TRd2zw
g{_yJstau{3Y=W9-
t9(PY^PR+q9yJESk3#G87ZPP38oyvSb%q5*|<<^fxDs)f2mzF__5f)Vy9I%ZZ#Up&HrYzq2%~1@HugR(
ZCmthnzc=O^4ephb6-
SikiJKOKRg`we3(c9d3tWm=CvE588MzYzK3k_q84tB2KlHRC*8Nq15b0vmZ+Hf15hQPUc^%53O7ar4XT
5p}7<b;a93YIe_~t%~kQqg+^Db(2uL*RGz8afO}`2=n<Prj&q0LUy>z;)UV`Q;#TA)ENyMGKPc;SQU4)
Hzs~<$=YRee*#D)^f7;q=wb$v=pG5xWLd3>#@K8X<dAR&fJOE&4;ryqat?k`){^vtHVA`1n0ML#qeJ*a
1<7TToN)EG@He^w4ysSkzFnNC#<-U9eR_N31R(s7z*84x!^8des{MY-
xcMc8?*84v`Mfp#R{$mRN56b^`YrDO@u>X5|ueIL){ZR6M)&A<m4HS63aehmi{Y#VI%PC-HrdND9#`Bn
$GrQ3Ht1jr#kn>kuLODP5SN4JMr)*9qE2=L~F{iFBUf}h=x*^)fO*ibsr3|hPmwro*r3>^Q<>}Z(BG;-
yly_}?{rc$evC}*G=VM(4w*}+gQ|Owb{VQk3z1Lrz9pz;(rxug9mvY#PD#|5uubRr;XW^lQcn{MXdjBG
FJx*&eb6jdg3MRTHJayxAc{2}Rv}W8JK=W_?DW8xkU>$dcvqzs>rK_Ay*~6AMa>Ut?Kw#*4XN}QYIF_e
~HW+?M70yuEtlo;3DtF2;U7nQqvfvE%`RdvZ(F0A7jxmr&QD2mz0xCLL)ksOB>qfeoaxsU=!B^GN9_2d
4M2fsItmCIf$fEEDEl$s<qEDjNed&lF5Ze2)y9r_HuCtSCX^=X_xfn-2==-
GCsoJZZk?3sHUf;X2&Ws*o+GI7aS1aLN$EB&4%d|taIF4POrlm!-
<U^+0JywiPfy@&J2j~;6!&=rOETzTVK16C@(d$osaJo{-
NOZ~l%;oS#vHM@I0HCRA?s3nFNSFIPu#*oH(N`hfc}AJ;dV%Q+Ko|~CmHO+w&KNKjT+y4irTD<bN|$}U
B+Y6?aAI{ObETT~N<oW@)yo$N;WnZ#I#7zYT&O_;Ce3jIHq8uPyni$w416n?{s%A)2+#93`SJn=#dmRG
K(V|b&0b8?$i4c8Hy^_bw|VY!j<*Ehwk5J4L~_Eq+r^JqxTUQR;)GxDof`}3uKD;E$Ia2-
rD?5wAR%|ftZNebU^kC-m0LTx(3Bx!J^;Iv(V$!{3yp|@%&w&@_R-
+EIV3Uof(jOr%t6ewUz4?(9J6TCp!2TrcM;ahNxhr@Wqe#EQoH64qwL~zb(h}g+zhRjtnwn|io%l>Cn6
?=8j8`GR3AE7K5nv5A4s?;cV-ng-
7aJe5QgBjZG;&YgwaAdl~|@0au<|GTh3**(E94aqhuNQFak)~*5)lB2ELmzfbV4zr5^x6F#d#>vdbi!=
Yun+q8MPFYrDL+MxPQ{-ZQLstgz;<=u9Kgps^CJ?3L7EAb#R|o(!E7Zyu!1;Z7D$-
cSNEbreR3H+?7W{I>p<!+#8sj(U=5>BeYRP`*m8n&z2ET;tw&F4ucY{YCw{ZMPPY!9|SmD)%SegRX|lM
LNbf%K=g~UVWX7>MS7)6LErQ?5m4s)UiT*6y;6EBBeZ3Rl2*9QvalZf3Zx3ivz<jDD>D(##8sE%3!sof
&(2VQhIYWTs2a>_E0I~q9jfib!Ro?X9PoUwN@ExQjCH5h58nv<sqWrhI+_>%cN-
92`h5?zsAJ%72KG%CRBO|a@8J;Tif`3qPJsUci>k!ZLL=HSYIC0B^(e57(8V}R|W!!(VoQe;#x9SN=@W
+&9zEPjUd*_n;Dg6#-&X{<(lQvs?#>z1nO0(a&3`HSV*g)T9Y>;0M&cb1aW&JggmQJRhy-HFMpX4u#YO
I4R%p<R|=GB$pGPsixe!qF8)*dB>kOh|Nq+mza0PH-
r3*XS^NJ#LH~b#Qu%}V|6%ph`TwQ(e|vN7|9>d||JUYmsdz(TX`j1FxzmT7{?>DE7WRLq^Yo6L+$(YqO
dZ3ro*X|t{OZNI!yAV3(_L1am=A{h+40lkv*TAs$Igqx^W%TI*O@h^ho{G9&aXYWMr}8nh55a_db`rXh
R@t40Q4TKtG92v7yxgz;(L_PG*Di7x^RGyYZ`CbchD`XX0?+4h;sQ$m?`hq%KaY-nBfj8v{IEm`NVWqf
SC#0WULf?^Zb0yP_Ha$m2K<J{hF!=%Z?y@>p|fHTbef>6Ybo|cj{;lmp&V1g{x-)^5THY-km248@jcpt
}r$Vtaro@3$Wj>Dh@<E!~2Pa&|AM3H-
0ap&mgg1xDUguS=x%B5N}zfxn4n=>5T3!AI$<iy=ps6Ma^NpxN4Xiug6p_s*cvd9%K?va27upJ$t{Lb(
?1(1Gl+Sr`J$u>_>9<Kuh?aUzna;%1S;pSmEm9rSGx3s#4rgX6&wVhulP(;ZePG=-
9$ustVrbTV@62D_-qN{k}WA@(o`1+uv1YunYYfRj?Ay58qo~9G|A0NyP@PAIgy4*UEjqb+Z=EXt6M9)0
O6>okjXDG1}6;E)y?AWeyIY`b*QdL0Z}JzeL*h-<kclwQT>j*Y@9o*nfMg^1pU>_72wO-
>2}9{Akh@m4A!Wulv}4yRG)#V*XdFy}tkLL7rb=%4yT>c6)6_a+S{W;=5c`)neni`b?y^^!1l!oi77WH
^b^yTs*=jWd&|dqWwcvOqIg=RTkv&Kb;;Q@h;-RB*7yuNTay7EqO2dMO&P-oE2u&J!VcKM-tTkp{y>Qa
`F+3MAG3>P_MEAUSTJipYLJQVbzsrGlxgC0i!~%MCx285eEFF^cIJAkLUoMucB_jppa2oEn-H-
F;TaM4+fPtXRlv9tCaAs$;JU13IU<nG<I%1=gF{d@ahUxR5Z;iQPhO^nM0;l_g2S3X*!GwUC}bXnAV;-
nON{{kHGRQ(7hr~K7q?K;LzRHA?<g+V=7eF%2n)grqFG~VbsR}W)KX6D3#S>FG}yl(^jipp3b6?a?G?a
bySd_C;!g)aeZY|C43D7pG}H<-
abBA80@Y3wq$df)*t2xl!)fyF0xrQ1Tvw9ZVXmYM=zfvH%3A7)W5<1kP*Hxq+5Hc+8;6m<TwnQXb(Cnl
cai2%Ko6aUcr#7ZV9c#(!w=TKpeg)Db26Y$+N1aQFtlmF-MKn=wH&iQ+&5Lk?LqqN2iOz@RYu_kVjfX+
DGoC%*$8RrYv=qTag-
C%1~7fkB%8L*F_Oa+~kTx<lEMWVIL#lMT>iBSh|}<4{JI|o1+V_baFGGz7hg}I5iL;&eGU*qTDi@W(W&
8S4$jwF~f9mupgRxW^0c2>;2lPN7&?XGJBQJ4s;6nNk{OVO>YrH4d@q;uy?UQ6b$M16lEh#d7<@cAs-Z
ZFmG8RjirS1dr-)r;=xiKNI5cHnWc2)J4pdZpo|nv2;BDvBm*;}!tqlFCexWjOOh>^-
Yw0p=!_yL6HFJfG`2TuD>14V7*|9cDW-
M1EPZMV;%*qt!psSy5c8a>T%RQQ3b=2#H!tv$LZTbTNpw?f+pXH#=3hVSXZ@_7^|OA~&-
z(E>u3F}pY^kT*3bG`KkH}xte^F>e%8<WSwHJ%{j8t$vwqgk`dL5g=fBhQ{{d^*aYX"""
ARCHIVE_SHA256 = "a62f48b10f5d7912b8bf03273c1a1b60ae9662e3f7b0b05f36472c4576d71daa"  # pragma: allowlist secret

START_TOKEN = "<START>"
END_TOKEN = "<END>"
OUTPUT_SCRIPT = Path("src/paper_quine/paper.tex")
WEIGHTS_PATH = Path("src/paper_quine/data/weights.b85")
WEIGHTS_DIGEST_PATH = Path("src/paper_quine/data/weights.sha256")
ARTIFACT_DIGEST_PATH = Path("src/paper_quine/data/paper.sha256")


def _decode_archive_bytes() -> bytes:
    compressed = base64.b85decode(ARCHIVE_B85.replace("\n", "").encode("ascii"))
    digest = hashlib.sha256(compressed).hexdigest()
    if digest != ARCHIVE_SHA256:
        raise RuntimeError(
            f"Archive digest mismatch: expected {ARCHIVE_SHA256}, got {digest}"
        )
    return zlib.decompress(compressed)


def _safe_extract(tar_stream: tarfile.TarFile, destination: Path) -> None:
    destination = destination.resolve()
    for member in tar_stream.getmembers():
        target_path = destination / member.name
        if not target_path.resolve().is_relative_to(destination):
            raise RuntimeError(f"Unsafe path in archive: {member.name}")
    tar_stream.extractall(destination)


def _ensure_parent(path: Path) -> None:
    path.parent.mkdir(parents=True, exist_ok=True)


def _wrap_text(value: str, width: int = 80) -> str:
    return "\n".join(textwrap.wrap(value, width))


def _embed_weights(script_bytes: bytes) -> str:
    embedded = zlib.compress(script_bytes, level=9)
    embedding_b85 = base64.b85encode(embedded).decode("ascii")
    digest = hashlib.sha256(script_bytes).hexdigest()
    payload = {
        "embedding_b85": embedding_b85,
        "embedding_sha256": digest,
        "end_token": END_TOKEN,
        "paper_sha256": digest,
        "start_token": START_TOKEN,
        "version": 2,
    }
    json_bytes = json.dumps(payload, separators=(",", ":")).encode("utf-8")
    compressed_payload = zlib.compress(json_bytes, level=9)
    weights_b85 = base64.b85encode(compressed_payload).decode("ascii")
    return weights_b85


def rebuild(destination: Path) -> None:
    destination = destination.resolve()
    destination.mkdir(parents=True, exist_ok=True)

    archive_bytes = _decode_archive_bytes()
    with tarfile.open(fileobj=io.BytesIO(archive_bytes), mode="r:") as tar:
        _safe_extract(tar, destination)

    script_source = Path(__file__).resolve()
    script_bytes = script_source.read_bytes()
    output_script = (destination / OUTPUT_SCRIPT).resolve()
    _ensure_parent(output_script)
    output_script.write_bytes(script_bytes)

    artifact_digest = hashlib.sha256(script_bytes).hexdigest() + "\n"
    _ensure_parent(destination / ARTIFACT_DIGEST_PATH)
    (destination / ARTIFACT_DIGEST_PATH).write_text(artifact_digest, encoding="utf-8")

    weights_b85 = _embed_weights(script_bytes)
    wrapped_weights = _wrap_text(weights_b85)
    raw_weights = wrapped_weights + "\n"
    (destination / WEIGHTS_PATH).write_text(raw_weights, encoding="utf-8")
    weights_digest = hashlib.sha256(raw_weights.encode("utf-8")).hexdigest() + "\n"
    (destination / WEIGHTS_DIGEST_PATH).write_text(weights_digest, encoding="utf-8")


def main() -> int:
    parser = argparse.ArgumentParser(
        description="Rebuild the paper_quine repository from this artifact."
    )
    parser.add_argument(
        "--output",
        type=Path,
        default=Path.cwd(),
        help=(
            "Target directory for reconstruction "
            "(default: current working directory)."
        ),
    )
    args = parser.parse_args()
    rebuild(args.output)
    print(f"Repository reconstructed at {args.output.resolve()}")
    return 0


if __name__ == "__main__":
    raise SystemExit(main())
